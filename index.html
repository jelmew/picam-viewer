<!doctype html>
<html>

<head>
    <title>Picam Viewer</title>
    <link rel="stylesheet" href="vendor/video-js.min.css">
    <style type="text/css">
        body {
            background: black;
            text-align: center;
        }

        #player {
            margin: 0 auto;
        }
    </style>
</head>

<body>
<!--    <video id="player" preload="auto" controls class="video-js vjs-default-skin"></video>-->
    <video-js id="player" width=600 height=300 class="vjs-default-skin" controls>
      <source
         src="https://jelmervanamen.nl/hls/index.m3u8"
         type="application/x-mpegURL">
    </video-js>
    <script src="vendor/promise.min.js"></script>
    <script src="vendor/fetch.js"></script>
    <script src="https://vjs.zencdn.net/7.4.1/video.min.js"></script>
    <script type="text/javascript">
        fetch('config.json').then(function (response) {
            return response.json();
        }).then(function (config) {
            var streamUrl = config.url;

            // build absolute url
            if (streamUrl.indexOf('http://') < 0 && streamUrl.indexOf('https://') < 0) {
                if (streamUrl.indexOf('/') === 0) {
                    streamUrl = location.pathname + streamUrl;
                } else if (streamUrl.indexOf('/') === 1) {
                    streamUrl = streamUrl.substr(1);
                }

                streamUrl = location.protocol
                    + '//'
                    + location.hostname
                    + (location.port ? ':' + location.port : '')
                    + '/'
                    + streamUrl;
            }

            var parameters = {
                aspectRatio: "16:9",
                fluid: true,
                techOrder: ['html5']
            };

            // Configure videojs
            var player = videojs('player', parameters);
            player.play();
        });
    </script>
</body>

</html>